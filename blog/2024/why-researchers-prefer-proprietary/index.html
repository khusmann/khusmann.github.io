<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Three Reasons Education And Social Scientists Prefer Proprietary Software And Data Formats | Kyle D. Husmann, Ph.D </title> <meta name="author" content="Kyle D. Husmann, Ph.D"> <meta name="description" content="(And The Features Open Software And Data Formats Need In Order To Compete)"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://kylehusmann.com/blog/2024/why-researchers-prefer-proprietary/"> <script src="/assets/js/theme.js?a5ca4084d3b81624bcfa01156dae2b8e"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Kyle</span> D. Husmann, Ph.D </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">teaching </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Three Reasons Education And Social Scientists Prefer Proprietary Software And Data Formats</h1> <p class="post-meta"> April 04, 2024 </p> <p class="post-tags"> <a href="/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/tag/science"> <i class="fa-solid fa-hashtag fa-sm"></i> science</a>   <a href="/blog/tag/data"> <i class="fa-solid fa-hashtag fa-sm"></i> data</a>   <a href="/blog/tag/software"> <i class="fa-solid fa-hashtag fa-sm"></i> software</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <p>When I first jumped into the world of education and social science research, I was surprised by the extent to which proprietary software and data formats were used to manage and exchange research data. As someone passionate about the use of open software and open data in scientific research, this was troubling to me.</p> <p>Everywhere I looked I saw data being shipped around in SPSS, SAS, and Stata formats. What gives? Proprietary software makes analyses less repeatable, the opposite of what you want for <a href="https://en.wikipedia.org/wiki/Open_science" rel="external nofollow noopener" target="_blank">Open Science</a>. Proprietary data formats make data less accessible, less interoperable, and harder to reuse… the complete opposite of <a href="https://www.go-fair.org/fair-principles/" rel="external nofollow noopener" target="_blank">FAIR data principles</a>. (Although to be fair, Stata’s dta format is an exception on this front, because at least they <a href="https://www.stata.com/help.cgi?dta_119" rel="external nofollow noopener" target="_blank">openly document their format’s internals</a>).</p> <p>At first, I thought the landscape was like this because of the nice graphical interfaces provided by proprietary statistical software (as opposed to coding in R or Python), as well as the network effects of vendor lock-in. And don’t get me wrong, these are big reasons! But after over a half decade of building education and social science data management and analysis pipelines using exclusively open software, I have come to realize that these are not the only reasons.</p> <p>I begrudgingly have to admit that proprietary software and data formats come with a few standard features that make them particularly nice for working with education and social science data. And for whatever reason, these features don’t receive similar attention in open alternatives.</p> <p>Sure, there are workarounds and ways to emulate some of these features, but I think we can do better. If we want to promote the use of open software and data formats in the education and social sciences, I think we need to provide solutions that meet these needs in more competitive ways.</p> <p>The three features I want to highlight in this post pertain to the standard metadata found in proprietary formats, and how this information is used by the statistical software when loading, displaying, and analyzing research data. SPSS, SAS, and Stata data formats are convenient containers that store data alongside metadata. The metadata stored by these formats allows me to save and load data with the data types of the columns preserved, as I would with <a href="https://parquet.apache.org/" rel="external nofollow noopener" target="_blank">Apache Parquet</a>, a open format used by many data scientists in open software pipelines.</p> <p>Unlike Parqet, however, these proprietary formats additionally have standards for three types of metadata that the proprietary (and open) software reading these formats use in extremely helpful ways: variable labels, rich categorical types (aka value labels) and missing value reasons. As I will argue below, I believe the absence of these features are currently pain points in the adoption and usage of open software and data formats by education and social science research communities.</p> <h1 id="the-three-types-of-metadata">The Three Types of Metadata</h1> <p>To define these types of metadata and show how they are used by researchers in their statistical software, I’ll be using some SPSS data from Crystal Lewis’ example data cleaning workflow project <a href="https://github.com/Cghlewis/sample_math_proj" rel="external nofollow noopener" target="_blank">here</a>. (If you haven’t already read her <a href="https://cghlewis.com/blog/data_clean_03/" rel="external nofollow noopener" target="_blank">blog post series</a> detailing her data management workflow process, I highly recommend it!)</p> <p>Unfortunately, I do not own a copy of SPSS, so I cannot provide you with a window into how this format looks in its “natural habitat”. However, by way of the venerable <a href="https://haven.tidyverse.org/" rel="external nofollow noopener" target="_blank">haven</a> package, I can load the file in R and emulate most of the nice features this format allows in SPSS (with some quirks here and there, as you’ll see).</p> <h2 id="variable-labels">Variable Labels</h2> <p>When I load a SPSS *.sav file into R using <code class="language-plaintext highlighter-rouge">haven::read_spss()</code>and preview it with <code class="language-plaintext highlighter-rouge">utils::view()</code>, I’m greeted by a table that looks like this:</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read_spss</span><span class="p">(</span><span class="s2">"w1_mathproj_stu_svy_clean.sav"</span><span class="p">)</span><span class="w">
</span><span class="n">view</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2024-04-04/var_labels-480.webp 480w,/assets/img/2024-04-04/var_labels-800.webp 800w,/assets/img/2024-04-04/var_labels-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/2024-04-04/var_labels.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>See those subheadings under the variable names? Those are variable labels. Variable labels are short textual descriptions I can attach to individual columns.</p> <p>I also get this information when I select / print a column of the table:</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="o">$</span><span class="n">math1</span><span class="w">
</span><span class="c1">#&gt; &lt;labelled&lt;double&gt;[5]&gt;: I enjoy learning math.</span><span class="w">
</span><span class="c1">#&gt; [1] 2 3 4 3 4</span><span class="w">
</span><span class="c1">#&gt;</span><span class="w">
</span><span class="c1">#&gt; &lt;...snip…&gt;</span><span class="w">
</span></code></pre></div></div> <p>Again, as you can see there at the top, there’s a description that gives me the survey text used to collect this variable: “I enjoy learning math”. Why is this nice? Well, datasets can have 1000s of variables with cryptic names. With variable labels, I can be a lot more confident I’m using the variable I’m intending to by reading its long-form description!</p> <p>It also means I can use functions like <a href="https://larmarange.github.io/labelled/reference/look_for.html" rel="external nofollow noopener" target="_blank"><code class="language-plaintext highlighter-rouge">labelled::look_for()</code></a> to search for variables in my dataset by scanning their descriptions… allowing me to find the variables I need without having to look them up in external documentation.</p> <p>Relatedly, I can use this information in scripts when I create summaries or other reports of my data. <a href="https://brad-cannell.github.io/codebookr/" rel="external nofollow noopener" target="_blank">codebookr</a>, for example, uses this information to automatically generate codebooks from my data, complete with summary statistics!</p> <p>By contrast, when I load a Parquet file in R, I get column names and types, but that’s it. (And, of course, with a CSV, I only get column names… column types need to be guessed or entered manually). Yes, Parquet does have the ability to store generic metadata, so when I save a data frame in R as a Parquet file, it preserves the <code class="language-plaintext highlighter-rouge">label</code> attribute (which holds the variable label) as a metadata entry. But this, of course, is not an interoperable standard other applications can count on.</p> <h2 id="rich-categorical-types-aka-value-labels">Rich Categorical Types (aka Value Labels)</h2> <p>Categorical data types are the bread and butter of education and social science research. A particularly common form of categorical data type that frequently appears in social science data are <a href="https://en.wikipedia.org/wiki/Likert_scale" rel="external nofollow noopener" target="_blank">likert scales</a>. Unlike a “pure” ordinal variable defined only by discrete, ordered options, likert scales also have numeric values attached to their levels.</p> <p>In SPSS files and Stata files, they are implemented by way of numeric types with a mapping of textual labels, called “value labels”. (Open implementations of SAS formats <a href="https://ofajardo.github.io/pyreadstat_documentation/_build/html/index.html#pyreadstat.pyreadstat.write_xport" rel="external nofollow noopener" target="_blank">don’t support</a> value labels as far as I’m aware):</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="o">$</span><span class="n">math1</span><span class="w">
</span><span class="c1">#&gt; &lt;labelled&lt;double&gt;[5]&gt;: I enjoy learning math.</span><span class="w">
</span><span class="c1">#&gt; [1] 2 3 4 3 4</span><span class="w">
</span><span class="c1">#&gt;</span><span class="w">
</span><span class="c1">#&gt; Labels:</span><span class="w">
</span><span class="c1">#&gt;  value             label</span><span class="w">
</span><span class="c1">#&gt;      1 strongly disagree</span><span class="w">
</span><span class="c1">#&gt;      2          disagree</span><span class="w">
</span><span class="c1">#&gt;      3             agree</span><span class="w">
</span><span class="c1">#&gt;      4    strongly agree</span><span class="w">
</span></code></pre></div></div> <p>When I print out data frames with these rich categorical types, I get to simultaneously see their numeric values as well as the textual level anchors they represent:</p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2024-04-04/val_labels-480.webp 480w,/assets/img/2024-04-04/val_labels-800.webp 800w,/assets/img/2024-04-04/val_labels-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/2024-04-04/val_labels.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>If I want to convert these numeric responses to regular R factors, it’s a simple call to <code class="language-plaintext highlighter-rouge">as_factor()</code>:</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">mutate</span><span class="p">(</span><span class="n">across</span><span class="p">(</span><span class="n">where</span><span class="p">(</span><span class="n">is.labelled</span><span class="p">),</span><span class="w"> </span><span class="n">as_factor</span><span class="p">))</span><span class="w">
</span><span class="c1">#&gt; # A tibble: 5 × 7</span><span class="w">
</span><span class="c1">#&gt;  stu_id grade_level math1          math2             math3          math4             int</span><span class="w">
</span><span class="c1">#&gt;    &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;          &lt;fct&gt;             &lt;fct&gt;          &lt;fct&gt;             &lt;fct&gt;</span><span class="w">
</span><span class="c1">#&gt; 1   1347           9 disagree       strongly disagree agree          agree             treatment</span><span class="w">
</span><span class="c1">#&gt; 2   1368          10 agree          disagree          disagree       disagree          treatment</span><span class="w">
</span><span class="c1">#&gt; 3   1377           9 strongly agree strongly agree    strongly agree strongly agree    control</span><span class="w">
</span><span class="c1">#&gt; 4   1387          11 agree          agree             NA             NA                treatment</span><span class="w">
</span><span class="c1">#&gt; 5   1399          12 strongly agree strongly disagree agree          strongly disagree control</span><span class="w">
</span></code></pre></div></div> <p>Why do I want both representations? Well, when I aggregate the likert items to create a composite score, I want to use their numeric values:</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="w"> </span><span class="o">|&gt;</span><span class="w">
  </span><span class="n">rowwise</span><span class="p">()</span><span class="w"> </span><span class="o">|&gt;</span><span class="w">
  </span><span class="n">transmute</span><span class="p">(</span><span class="n">stu_id</span><span class="p">,</span><span class="w"> </span><span class="n">mathMean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">c_across</span><span class="p">(</span><span class="n">starts_with</span><span class="p">(</span><span class="s2">"math"</span><span class="p">)),</span><span class="w"> </span><span class="n">na.rm</span><span class="o">=</span><span class="nb">T</span><span class="p">))</span><span class="w">
</span><span class="c1">#&gt; # A tibble: 5 × 2</span><span class="w">
</span><span class="c1">#&gt; # Rowwise:</span><span class="w">
</span><span class="c1">#&gt;  stu_id mathMean</span><span class="w">
</span><span class="c1">#&gt;   &lt;dbl&gt;    &lt;dbl&gt;</span><span class="w">
</span><span class="c1">#&gt; 1   1347     2.25</span><span class="w">
</span><span class="c1">#&gt; 2   1368     2.25</span><span class="w">
</span><span class="c1">#&gt; 3   1377     4</span><span class="w">
</span><span class="c1">#&gt; 4   1387     3</span><span class="w">
</span><span class="c1">#&gt; 5   1399     2.25</span><span class="w">
</span></code></pre></div></div> <p>But I can filter by the textual value labels too, if I want! (Or use the factor labels in an ordinal statistical analysis, plots, or wherever else it’s nice to see labels rather than numeric values)</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">filter</span><span class="p">(</span><span class="n">as_factor</span><span class="p">(</span><span class="n">math1</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"strongly agree"</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt; # A tibble: 2 × 7</span><span class="w">
</span><span class="c1">#&gt;   stu_id grade_level math1              math2                 math3              math4                 int</span><span class="w">
</span><span class="c1">#&gt;    &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl+lbl&gt;          &lt;dbl+lbl&gt;             &lt;dbl+lbl&gt;          &lt;dbl+lbl&gt;             &lt;dbl+lbl&gt;</span><span class="w">
</span><span class="c1">#&gt; 1   1377           9 4 [strongly agree] 4 [strongly agree]    4 [strongly agree] 4 [strongly agree]    0 [control]</span><span class="w">
</span><span class="c1">#&gt; 2   1399          12 4 [strongly agree] 1 [strongly disagree] 3 [agree]          1 [strongly disagree] 0 [control]</span><span class="w">
</span></code></pre></div></div> <p>Parquet has the capability of <a href="https://github.com/apache/parquet-format/blob/master/LogicalTypes.md" rel="external nofollow noopener" target="_blank">storing categorical data types</a>, but does not have a standard way to attach numeric values to the levels. In other words, when I write to Parquet, I have to choose between a numeric type (thereby losing the categorical variable data type status and textual anchor info), or a categorical type (thereby losing the numeric mappings). Sure, I can keep dictionaries around that map the likert levels to numeric values, and store them in Parquet’s generic metadata, but again, it’s a custom solution and not an interoperable standard. By contrast, when I load an SPSS file, I can convert between numeric and textual / factor representations with ease.</p> <h2 id="missing-value-reasons">Missing Value Reasons</h2> <p>A final feature shared by SPSS, SAS, and Stata data formats not explicitly supported by open alternatives is missing value reasons. When survey data are missing, there are often “reasons” attached. Maybe the person was absent the day the survey was given, maybe they skipped an item, maybe they selected the option “I don’t understand the question” when responding to the item. Researchers want the ability to differentiate between these kinds of missingness when they’re viewing, exploring, and analyzing their data.</p> <p>SPSS, SAS, and Stata formats store missing reasons as codes interlaced alongside regular values, along with a map from codes to textual labels. SPSS typically uses negative numbers to represent missingness, whereas SAS and Stata will use alphabetic codes (e.g. “.a”, “.b”) to represent different types of missingness.</p> <p>When I load an SPSS file in R, by default it maps all of the missing values to a single <code class="language-plaintext highlighter-rouge">NA</code> type (as it did in the examples above). But can also choose to load these missing reason codes by setting <code class="language-plaintext highlighter-rouge">user_na = TRUE</code>:</p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2024-04-04/missing_label-480.webp 480w,/assets/img/2024-04-04/missing_label-800.webp 800w,/assets/img/2024-04-04/missing_label-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/2024-04-04/missing_label.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>As you can see, I now get a code for the missing value I had in my data earlier. I can also see that the -99 value represents a missing value when I print out the column:</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read_spss</span><span class="p">(</span><span class="s2">"w1_mathproj_stu_svy_clean.sav"</span><span class="p">,</span><span class="w"> </span><span class="n">user_na</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span><span class="n">df2</span><span class="o">$</span><span class="n">math3</span><span class="w">
</span><span class="c1">#&gt; &lt;labelled_spss&lt;double&gt;[5]&gt;: Other people believe I can do well in math.</span><span class="w">
</span><span class="c1">#&gt; [1]   3   2   4 -99   3</span><span class="w">
</span><span class="c1">#&gt; Missing values: -99</span><span class="w">
</span><span class="c1">#&gt;</span><span class="w">
</span><span class="c1">#&gt; Labels:</span><span class="w">
</span><span class="c1">#&gt;  value             label</span><span class="w">
</span><span class="c1">#&gt;      1 strongly disagree</span><span class="w">
</span><span class="c1">#&gt;      2          disagree</span><span class="w">
</span><span class="c1">#&gt;      3             agree</span><span class="w">
</span><span class="c1">#&gt;      4    strongly agree</span><span class="w">
</span></code></pre></div></div> <p>I can also create columns with multiple types of missingness:</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">labelled_spss</span><span class="p">(</span><span class="w">
  </span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="m">-99</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">-98</span><span class="p">,</span><span class="w"> </span><span class="m">-97</span><span class="p">),</span><span class="w">
  </span><span class="n">labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="w">
    </span><span class="n">DISAGREE</span><span class="o">=</span><span class="m">1</span><span class="p">,</span><span class="w">
    </span><span class="n">NEUTRAL</span><span class="o">=</span><span class="m">2</span><span class="p">,</span><span class="w">
    </span><span class="n">AGREE</span><span class="o">=</span><span class="m">3</span><span class="p">,</span><span class="w">
    </span><span class="n">OMITTED</span><span class="o">=</span><span class="m">-99</span><span class="p">,</span><span class="w">
    </span><span class="n">REFUSED</span><span class="o">=</span><span class="m">-98</span><span class="p">,</span><span class="w">
    </span><span class="n">TECHNICAL_ERROR</span><span class="o">=</span><span class="m">-97</span><span class="w">
</span><span class="p">),</span><span class="w"> </span><span class="n">na_range</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="o">-</span><span class="kc">Inf</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">)))</span><span class="w">
</span><span class="c1">#&gt; &lt;labelled_spss&lt;double&gt;[7]&gt;</span><span class="w">
</span><span class="c1">#&gt; [1]   1   2   3 -99   2 -98 -97</span><span class="w">
</span><span class="c1">#&gt; Missing range:  [-Inf, 0]</span><span class="w">
</span><span class="c1">#&gt;</span><span class="w">
</span><span class="c1">#&gt; Labels:</span><span class="w">
</span><span class="c1">#&gt; value           label</span><span class="w">
</span><span class="c1">#&gt;      1        DISAGREE</span><span class="w">
</span><span class="c1">#&gt;      2         NEUTRAL</span><span class="w">
</span><span class="c1">#&gt;      3           AGREE</span><span class="w">
</span><span class="c1">#&gt;    -99         OMITTED</span><span class="w">
</span><span class="c1">#&gt;    -98         REFUSED</span><span class="w">
</span><span class="c1">#&gt;    -97 TECHNICAL_ERROR</span><span class="w">
</span></code></pre></div></div> <p>But all is not sunshine and rainbows. When I calculate the <code class="language-plaintext highlighter-rouge">sum()</code> of the values in the previous listing, I’d get a negative number because the missing values aren’t automatically masked out:</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">sum</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt; [1] -286</span><span class="w">
</span></code></pre></div></div> <p>In general, open software’s support of missing value reasons in tabular data is sparse, to say the least. Missing reasons are typically only specified when loading data in order to convert them all to a single <code class="language-plaintext highlighter-rouge">NULL</code> type, so they are lost for data exploration and analysis.</p> <p>Other than the haven package in R, I wasn’t aware of any other open software implementations of missing reasons until I recently stumbled on the <a href="https://github.com/dusadrian/declared" rel="external nofollow noopener" target="_blank">declared</a> R package, which I highly recommend checking out (it fixes the <code class="language-plaintext highlighter-rouge">sum()</code> issue I demonstrated above!) I also have been experimenting with my own approach, which I’ve put together in an R package called <a href="https://kylehusmann.com/interlacer">interlacer</a>. I’m unaware of similar efforts in Pandas / Polars (if you know about any, please let me know!). I have a lot more ideas on this front that I’m excited to share but I’ll talk about them more in a future post…</p> <p>Similarly, as far as I’m aware, SPSS, SAS, and Stata are the only data + metadata container formats with standard support for multiple, distinguishable types of missingness. Every other data container format I know of (like Parquet) just has a single <code class="language-plaintext highlighter-rouge">NA</code> type, and that’s it.</p> <h1 id="final-thoughts">Final Thoughts</h1> <p>Now don’t get me wrong, I know the graphical interfaces and vendor lock-in of proprietary software and data formats will probably continue to dominate for a long while yet. The point I’m trying to make here is that these are not the <em>only</em> issues at play, and I think this represents a potential opportunity.</p> <p><strong>If we want researchers to use open software and data formats, we need open standards and software integrations that fill the same roles and meet the same needs as the proprietary formats and software currently in use</strong>.</p> <h2 id="why-dont-you-just-use-csv">Why Don’t You Just Use CSV?</h2> <p>I’m sure this is the first comment on many people’s minds. CSV is the king of open, interoperable formats – just about everything can read and write it. It has unmatched longevity, and I agree that it should be the go-to long-term archival &amp; exchange format if you want something to last and be maximally compatible.</p> <p>But I think there’s still a place for an open data + metadata container that’s easy to use on a day-to-day basis. To make an analogy, I think that asking researchers to abandon their proprietary formats for CSV is somewhat like asking a regular user of Microsoft Word to switch to pure text files. Yes, it’s great for long-term archival and exchange, but you lose all the formatting. I think we can do better. I think there’s a need for something like the <a href="https://en.wikipedia.org/wiki/OpenDocument" rel="external nofollow noopener" target="_blank">OpenDocument Format</a> for research data. (And then, perhaps, when something like this exists we can advocate for it to be implemented by proprietary statistical software in a similar way <a href="https://www.infoworld.com/article/2618153/how-microsoft-was-forced-to-open-office.html" rel="external nofollow noopener" target="_blank">Microsoft was persuaded support OpenDocument Format</a>).</p> <h2 id="what-about-csv--a-schema-with-an-open-standard">What about CSV + a schema with an open standard?</h2> <p>I agree, this would be a great way forward! I think it would be better than embedding metadata in a Parquet or other binary data container for a lot of reasons, particularly for long-term preservation. I’m imagining a simple open format consisting of a CSV and “schema.json” zipped together that would have the three features of SPSS, SAS, and Stata formats I talked about in this post, and more.</p> <p>There are a number of open standards being developed that could act as the “schema.json” for a format like this. I’m aware of <a href="https://ddialliance.org/Specification/DDI-Codebook/2.5/" rel="external nofollow noopener" target="_blank">DDI Codebook</a>, <a href="https://www.cdisc.org/dataset-json" rel="external nofollow noopener" target="_blank">CDISC Dataset</a>, <a href="https://bids-specification.readthedocs.io/en/stable/" rel="external nofollow noopener" target="_blank">BIDS</a>, <a href="https://psych-ds.github.io/" rel="external nofollow noopener" target="_blank">Psych-DS</a>, and <a href="https://frictionlessdata.io/" rel="external nofollow noopener" target="_blank">Frictionless</a>, but if you know of other efforts, please let me know!</p> <p>Unfortunately, none of these open standards are at a point yet for me to recommend to my colleagues to start using right out of the box. The downside of having <a href="https://xkcd.com/927/" rel="external nofollow noopener" target="_blank">so many disparate efforts to create standards</a> is that there is no one obvious standard to recommend to my colleagues to use. Many of these standards are missing at least one of the three features I mentioned above, are focused on a niche type of research data, are lacking fully-featured open software editors and libraries, or don’t have converters to and from SPSS, SAS, and Stata formats.</p> <p><strong>If we want data managers to use our open software and data formats, we need to provide them with an ecosystem that makes their jobs easier.</strong></p> <p>At the end of the day, here’s the pitch I want to be able to give to researchers and data managers:</p> <blockquote> <p>When you prepare your data in this open format, and someone asks you for a SPSS file, you can give them one instantly, with the press of a button. No need to export to CSV and manually write SPSS syntax to set variable labels, value labels, and missing value labels; these are all exported from the open format into the SPSS file for you. Similarly, if you start collaborating with someone who uses Stata or SAS, with another press of a button, you can give them a Stata or SAS file with all of the variable labels, value labels and missing value labels properly set in that format.</p> </blockquote> <blockquote> <p>Furthermore, there’s no need to manually keep codebooks up-to-date for all these exports. Because all the information that usually goes into a codebook is captured in the open format, all it takes is another button press to render a beautiful codebook for your data in PDF, HTML, or whatever format you please.</p> </blockquote> <p>That said, I’m excited about the direction these open standards are heading, and will write a future post going into more detail about them later!</p> </div> </article> <div id="giscus_thread" style="max-width: 800px; margin: 0 auto;"> <script>let giscusTheme=determineComputedTheme(),giscusAttributes={src:"https://giscus.app/client.js","data-repo":"khusmann/khusmann.github.io","data-repo-id":"","data-category":"Comments","data-category-id":"","data-mapping":"title","data-strict":"1","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":giscusTheme,"data-lang":"en",crossorigin:"anonymous",async:""},giscusScript=document.createElement("script");Object.entries(giscusAttributes).forEach(([t,e])=>giscusScript.setAttribute(t,e)),document.getElementById("giscus_thread").appendChild(giscusScript);</script> <noscript>Please enable JavaScript to view the <a href="http://giscus.app/?ref_noscript" rel="external nofollow noopener" target="_blank">comments powered by giscus.</a> </noscript> </div> </div> </div> <footer class="sticky-bottom mt-5" role="contentinfo"> <div class="container"> © Copyright 2024 Kyle D. Husmann, Ph.D. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?5d75c11f89cd96294bf5e6dd1ee1bb30"></script> <script defer src="/assets/js/common.js?fcfacfb8c6281f5e68d5a7d348186eb1"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script> <script data-goatcounter="https://kylehusmann.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>